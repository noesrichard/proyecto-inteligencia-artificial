function [y1] = myNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 25-Jan-2023 05:27:48.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx30 matrix, input #1
% and returns:
%   y = Qx10 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];
x1_step1.gain = [0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196;0.00784313725490196];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.826948052745947404;-2.7755550057322029289;-0.10850154581141256693;2.4750985430953122979;-0.96045657865196776282;-0.21170918395131527179;-1.1173505488440886868;2.8421113552632926158;1.9380834352973659307;3.8898561483643421255];
IW1_1 = [-0.37638607392099610038 -0.66974815281798527611 -0.36675636498256725115 -0.51428954049435460227 -0.47896693751951108231 0.15146716331386039789 -0.36174981653493559763 -0.49351827325704811233 -0.6566701461251923666 -0.36473739603692428846 -0.14950944136263016881 -0.47311139182523115343 -0.22155145481783347639 -0.62270796193160249388 -0.83949383293645329918 -0.84814877887708239879 -0.27897491087301223844 -0.80589768675268524944 -0.10752258476546695809 -0.77110356098948906745 0.75362681788033780705 1.1253749497187743867 0.2984270711891515715 0.24332286050197315941 1.1637682290754969294 0.66864232722699856737 0.14238272085811898293 0.67827771474154818776 0.51231924633816383619 0.64374335702530927072;-0.050679614585824678263 0.3401326533580302236 0.19825661808125336072 -0.24801099660396844215 0.27216236604630889007 -0.31570316274081183794 -0.44663075463794621456 0.23109597602005482742 0.33028485346146441159 -0.14539232455744877104 -1.2581851148433054188 -1.3632898977875493873 -0.7014300200272381991 -0.97084311768628972494 -1.522370401667811457 -0.94761550386175941174 -1.348871332887610075 -1.0388556249837890277 -0.46063928065832171477 -1.2523800186784781463 0.82629862209352578084 0.49089966467246110016 0.40149772893643709271 0.5390775857004103111 0.313199045020448541 0.61879606024581834678 0.61805290001015433798 0.30823345476791286224 1.0729472761108593826 0.50179641276540698502;0.38554170304433926786 0.59819263379286680138 0.97256018433816238122 0.7199240973606777505 0.95576620337388484838 1.2334384121604071716 0.50314609074840566105 0.93973293372170618731 0.90834664101095607958 0.63448646182527257409 -0.73341392628140078536 -0.80578929578969471503 -0.45537120982993317675 -1.007150340881395767 -0.17556889213875390143 -0.36690357424154979027 -0.4815988317603296931 -0.9876357606965806557 -0.72346231932840887602 -0.93295969952903468059 0.22237945357220118003 0.078129029874672684119 -0.08707129671192992415 -0.057250907670242490166 -0.1721658724901851123 -0.20608471377277151615 -0.4041344936300634294 -0.030362956160904622932 -0.13078755241821915511 -0.3527272748545560721;-0.28460112292676187362 -0.45824372304159327607 -0.92615138449500455931 -1.1389745717123040958 -0.3339817890978517001 -0.96428189288653731737 -0.79143809542301868376 -0.53952646944608484425 0.028158610384300016005 0.55633625411292619845 -0.43002674442833077606 -0.5906492093644312158 -0.38025633777037193273 -0.43381343151070755892 -0.54730207556286691872 -0.23781116933892529341 -0.34520455531865662513 0.27940389039242546909 0.5925671134604773016 0.64301714564492928883 0.18090172198135096027 0.030991427559701717476 -0.30641847323456311569 -0.41880748814764501287 0.17213762410560526361 0.14474968261844284312 -0.27263082120129111807 0.25263467272095530003 0.59326755915242690431 0.1152299867702970132;-0.39091854049957175388 -0.63972825185290438377 -0.7333750170614556918 -0.66528737775962265566 -0.39045153765439627458 -0.75544517651899878441 -0.31957663478776715538 -0.66163867186456215563 -0.76796322957885210236 -1.1592026547699931793 1.4240125915166903514 1.396898175094982042 1.2919946294594013558 1.5500526024758971566 1.0747578899289276233 1.3056529965842260665 1.1317387273348016308 1.334678635589938489 1.2164174914337924083 0.89319945465725636424 -0.32152969219610322282 -0.44455843599017136336 -0.28832710850770471023 -0.24033826263529631251 -0.31645511810731091762 -0.24488209653768772123 -0.12244020562202999336 -0.65209244701759361273 -0.40897191696004986383 -0.25765587150900676194;0.045082036317196712283 0.76684069085922546005 0.43321829125650895831 -0.13169356774384005648 -0.0028860755620291559526 -0.033406280422658043983 0.17194421979192242578 0.023931093311885486691 0.085738138983575018504 0.43289801249707088315 0.56439798052759615477 0.75644268145500548339 -0.22361263640124590113 0.41073775777857912672 0.54200819908287189985 0.55809325293404909996 0.4428236482103787286 0.16135149059755035661 -0.21951659891181499185 0.45180386829865482046 -0.80766448972850135579 -0.55824360975293596532 -0.99489963788588631211 -1.0565987294866865387 -1.0635236872062243663 -0.70131035563732335714 -0.75528148172612263878 -1.1510249963138785567 -0.58399759554717922683 -0.90005615038349939816;0.53548061995345286324 0.75983840230552013306 0.2445200645984129395 1.0254587330973190529 1.1634232406168880658 0.78721963350534995829 0.44652787876835664527 1.0403510324395264242 1.0100902672356804057 0.65548220750947472357 0.088716828507841211104 0.27808178295765478838 0.36126171763380393598 -0.50016353535322544133 0.22712831482024481433 0.40778918649872492042 0.35751984849102752539 -0.45254698550245797684 -0.01605958606388506113 -0.47684330526510454451 -0.83386221006126304278 -0.29673836006164805434 -0.72938803360819592925 -0.57935563587891492077 -0.68457828038470647236 -1.0079517637574570976 -0.70676213600736581544 -1.1641819348020758795 -0.88722530543349797938 -0.6305899512549113517;0.014647661401968294775 -0.50821985752139298143 -0.99613309128517857349 -0.98345743502398985658 -0.30090314867036482838 -0.8916781025804318972 -0.10398961754913677025 -0.032961848192243875522 -0.028070871817496255429 0.49562251409027552329 0.65136086061412168391 -0.0354681948806101488 0.56137078180178623388 0.47748730806781786162 0.21135738403369050409 0.56881678768647925271 0.42303973945117162581 1.0214602218949913048 0.5349508779519095425 0.15605028952391677977 0.34639084101471978583 -0.23394593131074509218 -0.13455345867111015434 -0.043188881833237331709 0.2737293314951453338 0.082799775828137217593 0.45549054475469286096 0.51467999380436157963 -0.049952351981160762751 -0.47129124703331903845;0.577245724230487256 0.30280616111082636621 0.42715635555965925096 0.45070586526078171286 0.050954385341219120276 0.47514983440663710601 0.45359589403410921493 0.42290013644943663662 0.82518392587879452194 0.62969341455168581501 -0.099007401186505333834 -1.0067924850677303361 -0.87999347822492346438 -0.94847603832401072843 -0.77220803168640983483 -0.54874423262901128595 -0.39242971147232386109 -0.63035383251467413945 -0.16127405838373998215 -0.69677229073948476756 0.34565289617552136248 0.36054134904503659653 0.6548418220242503418 0.68751658895985179321 0.36279747379820020958 0.68482575347688812162 0.34140373186038608377 0.10340390745524434546 0.86945604259519038148 0.63187301452382338418;-0.11849740957491886051 -0.079697377171615027547 -0.93337270726549026456 -0.29812707542470850974 -0.88420204788573919519 -0.85151013525126983961 -0.87807969553433118381 -0.51089802548301721519 -0.0044338075841231384261 -0.58100582213423923594 0.47483851635203255803 0.45566527865768635674 0.26128062229097059888 0.40362918580990581052 0.51359416223613718611 0.74056687805820375914 0.38098673583551434518 0.22582115772492233896 0.33391854615867444522 0.33486241948675460334 -1.1816125649972968326 -0.89426010542827993888 -0.88695034615589318783 -0.33875621743411454823 -0.3606191385990528131 -0.63868103805597786771 -0.64525855331659465186 -0.98639804308188938631 -0.76144994334413640402 -0.39307820367439455511];

% Layer 2
b2 = [-0.10831028174098066008;-0.16553487658807011784;-0.94494443792925131298;-0.0880168588542432212;-0.71126728157436935884;-0.42986001047422367494;-0.2648564212856002742;1.3362315412829186556;1.0161196889756929362;-1.0210155875406188297];
LW2_1 = [2.1001653117719074615 1.7239483347059005869 1.9113089275667018985 0.41725802801674505282 -2.0880710724163407122 0.94041988604653004025 -1.9170495113735823711 1.1705228159001426214 -3.5672285215149011073 0.88465501377300403973;3.8314706979403569953 0.96296905226997531191 -3.8732561987737486042 1.3473623288514804397 0.56843785903579024943 -3.6674594406731064744 -2.1621887115240303601 1.0768450700052532021 0.88524916880538806474 0.28487936239351879797;-1.6361249518666625136 -1.5171815677676225853 2.0839377911435850166 2.6587631117687937632 -2.3686650759952043721 1.1993486912313804371 3.2222059010733161699 2.6973140178933876498 0.98406374143138675148 -1.2677280341793857321;-1.533257055692688331 -1.250107153062220755 -1.9152112694010663407 1.9027906803544394343 3.2804075023563417091 1.8712200713140714203 -0.79837071873412956968 1.9339780613451797997 -2.2745947316719394848 -0.42570934920323505457;-1.6457320574018026171 -2.3377844393002931156 -0.55478573597979596865 0.46915673113244410475 -1.9017178512327341799 -0.84262932631539533279 -2.9791153136609982433 1.3164981774368818002 1.8107879561314699224 2.5823161988197362859;-0.77461960803490970129 -3.2057700938265298873 -0.38809385226666520685 -3.045299880364560785 -1.3245386142732051837 1.6809431583747613814 1.2199007762938491872 -3.8074078820078405272 0.78170132752583210145 0.52632540835424723724;-1.4067526986682015178 4.5146495784617552971 0.47274941940760129011 0.90548656733627053139 -1.3968943548391381526 2.3206449937739939138 2.4092475297007238666 -3.6558683231820037207 0.33782369973619730263 -0.73799687984017692255;0.12506026323950067414 1.9799530815165040654 2.2228361017260191979 -0.029303045042475092674 -2.8209768732271536251 -3.6165987188079156134 -1.8281704057061181068 -2.1591875749040192467 2.3941807583883325528 -0.83182316725869331897;-1.6637969900573457149 -1.2507796685201792997 -2.5355457764074094129 -2.031828630160549487 2.8012696525491027622 -1.9671005480416030586 0.7630607076631146235 0.75822539875835504031 1.1648165245645256682 -5.1566845477625093963;0.32844645157831159343 -1.5718180090984510411 1.7077297299578226841 -3.1793372976692308995 3.2030563935510927287 1.5472063655180350317 2.6330874177850551732 2.029731973986788951 -0.4002850791009977538 0.96748375569105726779];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n,~)
if isa(n,'gpuArray')
    a = iSoftmaxApplyGPU(n);
else
    a = iSoftmaxApplyCPU(n);
end
end
function a = iSoftmaxApplyCPU(n)
nmax = max(n,[],1);
n = bsxfun(@minus,n,nmax);
numerator = exp(n);
denominator = sum(numerator,1);
denominator(denominator == 0) = 1;
a = bsxfun(@rdivide,numerator,denominator);
end
function a = iSoftmaxApplyGPU(n)
nmax = max(n,[],1);
numerator = arrayfun(@iSoftmaxApplyGPUHelper1,n,nmax);
denominator = sum(numerator,1);
a = arrayfun(@iSoftmaxApplyGPUHelper2,numerator,denominator);
end
function numerator = iSoftmaxApplyGPUHelper1(n,nmax)
numerator = exp(n - nmax);
end
function a = iSoftmaxApplyGPUHelper2(numerator,denominator)
if (denominator == 0)
    a = numerator;
else
    a = numerator ./ denominator;
end
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
